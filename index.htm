<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title> new document </title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- 	<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
	<script type="text/javascript">
		$(function(){
			$("#msg").on("input keyup blur", function(){
//				console.log("DDDD");
				var aa = byteCounter($("#msg").val(), 0);
				$("#bytes").html(aa);
			});
		})

		function byteCounter(text, blank=0) {
			// blank === 0 -> 공백 미포함  ,  blank !== 1 -> 공백 포함
			var byte = 0;
			// byte 를 0으로 두고, 한글자씩 체크하면서 한자 한문 한글이면 2를 올려주고, 그 외는 1을 올려주겠습니다.
			if (blank==0) {
				// 공백 미포함일 때는, 미리 줄바꿈과 공백을 빈칸으로 처리합니다.
				text = text.replace(/\s+/g,"");
			}

			for(var i=0; i<text.length;i++) {

				// 정규식.test() 함수는 인수가 정규식을 만족하는지 판단하여 true or false 값을 반환합니다.
				// 한글표현 정규식 : ㄱ-ㅎㅏ-ㅣ가-힣
				// 한자표현 정규식 : 一-龥
				// 일본어표현 정규식 : ぁ-ゔァ-ヴー々〆〤
				// 이 모든것을 /[]/ 안에 포함시켜서 연달아 써주면 "or" 처리됩니다.
				// 한, 중, 일 언어라면, byte를 2 더해주고, 아니라면 1을 더해주고, 최종적으로 byte를 return 합니다.
				if (/[\s一-龥?]/.test(text[i])) {
						byte = byte+2
				}else if (/[\s'",./]/.test(text[i])) {
						byte = byte;
				} else {
						byte++
				}

				if(byte > 199){
					console.log(text)
					$("#msg").val(text.substr(0, byte));
					break;
				}
			}
			return byte
		}
	</script>
</head>

<body>
<!-- 	<table class="table"> -->
<!-- 		<thead> -->
<!-- 			<tr> -->
<!-- 				<th scope="col">#</th> -->
<!-- 				<th scope="col">Handle</th> -->
<!-- 			</tr> -->
<!-- 		</thead> -->
<!-- 		<tbody> -->
<!-- 			<tr> -->
<!-- 				<th scope="row">1</th> -->
<!-- 				<td> -->
<!-- 					 -->
<!-- 				</td> -->
<!-- 			</tr> -->
<!-- 		</tbody> -->
<!-- 	</table> -->

<div class="input-group input-group-lg">
<!-- 						<div class="input-group-prepend"> -->
<!-- 							<span class="input-group-text" id="inputGroup-sizing-lg">Large</span> -->
<!-- 						</div> -->
	<input type="text" id="msg" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg">
	<div class="input-group-append">
		<span class="input-group-text">구매갯수&nbsp; <span id="bytes">0</span></span>
	</div>
</div>
</body>
</html>
